# Environment Variables for Docker Compose
# Copy this file to .env and update with your actual values

# =============================================================================
# IDENTITY PROVIDER CONFIGURATION (Web Application)
# =============================================================================

# Enable/disable OIDC authentication (set to false for development without auth)
OIDC_ENABLED=false

# Identity provider authority URL (issuer)
# Examples:
#   Azure AD: https://login.microsoftonline.com/{tenant-id}/v2.0
#   Auth0: https://{your-tenant}.auth0.com/
#   Keycloak: https://keycloak.example.com/realms/{realm-name}
OIDC_AUTHORITY=https://your-identity-provider.com

# Web application client ID registered with identity provider
OIDC_CLIENT_ID=residencyroll-web

# Web application client secret (keep this secure!)
OIDC_CLIENT_SECRET=your-client-secret-here

# Require HTTPS for OIDC metadata (set to false only for local development)
OIDC_REQUIRE_HTTPS=true

# API scope to request (should match API audience)
OIDC_API_SCOPE=residencyroll-api

# =============================================================================
# API JWT CONFIGURATION
# =============================================================================

# JWT issuer authority (same as OIDC_AUTHORITY typically)
JWT_AUTHORITY=https://your-identity-provider.com

# JWT audience identifier (must match value in identity provider)
JWT_AUDIENCE=residencyroll-api

# Require HTTPS for JWT metadata validation
JWT_REQUIRE_HTTPS=true

# =============================================================================
# PORT CONFIGURATION
# =============================================================================

# External ports exposed on the host
API_PORT=8080
WEB_PORT=8081

# Internal container ports
API_INTERNAL_PORT=80
WEB_INTERNAL_PORT=8080

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# ASP.NET Core environment (Production, Development, Staging)
ASPNETCORE_ENVIRONMENT=Production

# Database path (SQLite)
DB_PATH=/app/data/residencyroll.db

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed CORS origins
CORS_ORIGIN_0=http://localhost:8081
CORS_ORIGIN_1=http://residencyroll-web:80

# =============================================================================
# FORWARDED HEADERS CONFIGURATION (Reverse Proxy Support)
# =============================================================================

# Configure trusted reverse proxies for X-Forwarded-For and X-Forwarded-Proto headers
# This is critical for security when deploying behind reverse proxies like nginx, Caddy, or cloud load balancers
# Only configure these if you are using a reverse proxy in front of the application

# Known Proxies - Specific IP addresses of trusted reverse proxies
# Leave empty if not behind a reverse proxy (defaults to localhost/loopback only)
# Examples:
#   Single proxy: FORWARDED_HEADERS_KNOWN_PROXY_0=172.17.0.1
#   Multiple proxies: Set FORWARDED_HEADERS_KNOWN_PROXY_0, FORWARDED_HEADERS_KNOWN_PROXY_1, etc.
FORWARDED_HEADERS_KNOWN_PROXY_0=
FORWARDED_HEADERS_KNOWN_PROXY_1=

# Known Networks - CIDR notation for trusted proxy networks
# Use this for cloud environments where proxy IPs may change within a range
# Examples:
#   Docker network: FORWARDED_HEADERS_KNOWN_NETWORK_0=172.17.0.0/16
#   Private network: FORWARDED_HEADERS_KNOWN_NETWORK_0=10.0.0.0/8
#   Cloud LB subnet: FORWARDED_HEADERS_KNOWN_NETWORK_0=10.240.0.0/16
FORWARDED_HEADERS_KNOWN_NETWORK_0=
FORWARDED_HEADERS_KNOWN_NETWORK_1=

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# --- Azure AD / Microsoft Entra ID ---
# OIDC_ENABLED=true
# OIDC_AUTHORITY=https://login.microsoftonline.com/00000000-0000-0000-0000-000000000000/v2.0
# OIDC_CLIENT_ID=12345678-1234-1234-1234-123456789abc
# OIDC_CLIENT_SECRET=your-azure-client-secret
# OIDC_API_SCOPE=api://residencyroll-api/.default
# JWT_AUTHORITY=https://login.microsoftonline.com/00000000-0000-0000-0000-000000000000/v2.0
# JWT_AUDIENCE=api://residencyroll-api

# --- Auth0 ---
# OIDC_ENABLED=true
# OIDC_AUTHORITY=https://your-tenant.auth0.com/
# OIDC_CLIENT_ID=your-auth0-client-id
# OIDC_CLIENT_SECRET=your-auth0-client-secret
# OIDC_API_SCOPE=read:trips write:trips
# JWT_AUTHORITY=https://your-tenant.auth0.com/
# JWT_AUDIENCE=https://api.residencyroll.com

# --- Keycloak ---
# OIDC_ENABLED=true
# OIDC_AUTHORITY=https://keycloak.example.com/realms/residencyroll
# OIDC_CLIENT_ID=residencyroll-web
# OIDC_CLIENT_SECRET=your-keycloak-client-secret
# OIDC_API_SCOPE=residencyroll-api
# JWT_AUTHORITY=https://keycloak.example.com/realms/residencyroll
# JWT_AUDIENCE=residencyroll-api
